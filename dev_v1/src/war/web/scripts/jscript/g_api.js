    var addr_list = {
  "address": [
    {
      "locality_1": "Sector 1",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Sector 1",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Sector 2",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Sector 2",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Sector 3",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Sector 3",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Sector 4",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Sector 4",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Sector 5",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Sector 5",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Sector 6",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Sector 6",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Sector 7",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Sector 7",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Haralur",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Haralur",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Royal Placid Layout,PWD Quarters,Sector 1",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Royal Placid Layout,PWD Quarters,Sector 1",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Somasundarapalaya",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Haralur",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Reliable Tranquil Layout",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Haralur",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Rajiv Gandhi Nagar,HSR Layout",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Rajiv Gandhi Nagar,HSR Layout",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Parangi Palaya, Sector 2",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Parangi Palaya, Sector 2",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Silk Board Bus Stop,NH7,Muneswara Nagar,Sector 6",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Silk Board Bus Stop,NH7,Muneswara Nagar,Sector 6",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Ambalipura",
      "area_1": "HSR Layout",
      "area_2": "HSR Layout Ambalipura",
      "city": "Bangalore",
      "pCode": 560102
    },
    {
      "locality_1": "Stage 1",
      "area_1": "BTM Layout",
      "area_2": "BTM Layout Stage 1",
      "city": "Bangalore",
      "pCode": 560029
    },
    {
      "locality_1": "Stage 2",
      "area_1": "BTM Layout",
      "area_2": "BTM Layout Stage 2",
      "city": "Bangalore",
      "pCode": 560029
    },
    {
      "locality_1": "Silk Board Flyover,Madiwala,Stage 2",
      "area_1": "BTM Layout",
      "area_2": "BTM Layout Silk Board Flyover,Madiwala,Stage 2",
      "city": "Bangalore",
      "pCode": 560029
    },
    {
      "locality_1": "Stage 1",
      "area_1": "Madiwala",
      "area_2": "Madiwala Stage 1",
      "city": "Bangalore",
      "pCode": 560068
    },
    {
      "locality_1": "Madiwala Ayyappa Temple Bus Stop, Hosur Rd",
      "area_1": "Madiwala",
      "area_2": "Madiwala Madiwala Ayyappa Temple Bus Stop, Hosur Rd",
      "city": "Bangalore",
      "pCode": 560068
    },
    {
      "locality_1": "Madiwala, Hosur Rd",
      "area_1": "Madiwala",
      "area_2": "Madiwala Madiwala, Hosur Rd",
      "city": "Bangalore",
      "pCode": 560068
    },
    {
      "locality_1": "Maruthi Nagar",
      "area_1": "Madiwala",
      "area_2": "Madiwala Maruthi Nagar",
      "city": "Bangalore",
      "pCode": 560068
    },
    {
      "locality_1": "Mangammanapalaya",
      "area_1": "Madiwala",
      "area_2": "Madiwala Mangammanapalaya",
      "city": "Bangalore",
      "pCode": 560068
    },
    {
      "locality_1": "Ambalipura",
      "area_1": "Madiwala",
      "area_2": "Madiwala",
      "city": "Bangalore",
      "pCode": 560068
    },
    {
      "locality_1": "Bandepalaya",
      "area_1": "Madiwala",
      "area_2": "Madiwala Bandepalaya",
      "city": "Bangalore",
      "pCode": 560068
    },
    {
      "locality_1": "VGP Layout",
      "area_1": "Madiwala",
      "area_2": "Madiwala VGP Layout",
      "city": "Bangalore",
      "pCode": 560068
    },
    {
      "locality_1": "Singasandra",
      "area_1": "Madiwala",
      "area_2": "Madiwala Singasandra",
      "city": "Bangalore",
      "pCode": 560068
    },
    {
      "locality_1": "1st Block",
      "area_1": "Koramangala",
      "area_2": "Koramangala 1st Block",
      "city": "Bangalore",
      "pCode": 560034
    },
    {
      "locality_1": "2nd Block",
      "area_1": "Koramangala",
      "area_2": "Koramangala 2nd Block",
      "city": "Bangalore",
      "pCode": 560034
    },
    {
      "locality_1": "3rd Block",
      "area_1": "Koramangala",
      "area_2": "Koramangala 3rd Block",
      "city": "Bangalore",
      "pCode": 560034
    },
    {
      "locality_1": "4th Block",
      "area_1": "Koramangala",
      "area_2": "Koramangala 4th Block",
      "city": "Bangalore",
      "pCode": 560034
    },
    {
      "locality_1": "5th Block",
      "area_1": "Koramangala",
      "area_2": "Koramangala 5th Block",
      "city": "Bangalore",
      "pCode": 560034
    },
    {
      "locality_1": "6th Block",
      "area_1": "Koramangala",
      "area_2": "Koramangala 6th Block",
      "city": "Bangalore",
      "pCode": 560034
    },
    {
      "locality_1": "7th Block",
      "area_1": "Koramangala",
      "area_2": "Koramangala 7th Block",
      "city": "Bangalore",
      "pCode": 560034
    },
    {
      "locality_1": "8th Block",
      "area_1": "Koramangala",
      "area_2": "Koramangala 8th Block",
      "city": "Bangalore",
      "pCode": 560034
    },
    {
      "locality_1": "Silk Board",
      "area_1": "Koramangala",
      "area_2": "Koramangala Silk Board",
      "city": "Bangalore",
      "pCode": 560034
    },
    {
      "locality_1": "Sadduguntepalaya",
      "area_1": "Sadduguntepalaya",
      "area_2": "Sadduguntepalaya Sadduguntepalaya",
      "city": "Bangalore",
      "pCode": 560060
    },
    {
      "locality_1": "Indian Oil Petrol Bunk, Bannerghatta Road, Bhavani Nagar",
      "area_1": "Sadduguntepalaya",
      "area_2": "Sadduguntepalaya Indian Oil Petrol Bunk, Bannerghatta Road, Bhavani Nagar",
      "city": "Bangalore",
      "pCode": 560060
    },
    {
      "locality_1": "South Indian Bank, Sadduguntepalya, Tavarekere",
      "area_1": "Sadduguntepalaya",
      "area_2": "Sadduguntepalaya South Indian Bank, Sadduguntepalya, Tavarekere",
      "city": "Bangalore",
      "pCode": 560060
    },
    {
      "locality_1": "Ejipura",
      "area_1": "Ejipura",
      "area_2": "Ejipura Ejipura",
      "city": "Bangalore",
      "pCode": 560047
    },
    {
      "locality_1": "Ejipura Bus Stand, Ejipura Main Rd",
      "area_1": "Ejipura",
      "area_2": "Ejipura Ejipura Bus Stand, Ejipura Main Rd",
      "city": "Bangalore",
      "pCode": 560047
    },
    {
      "locality_1": "Sreenivagilu, Chandra Reddy Layout, S T Bed Layout",
      "area_1": "Ejipura",
      "area_2": "Ejipura Sreenivagilu, Chandra Reddy Layout, S T Bed Layout",
      "city": "Bangalore",
      "pCode": 560047
    },
    {
      "locality_1": "Bellandur",
      "area_1": "Bellandur",
      "area_2": "Bellandur Bellandur",
      "city": "Bangalore",
      "pCode": 560103
    },
    {
      "locality_1": "Bellandur Post Office, Bellandur Main Rd",
      "area_1": "Bellandur",
      "area_2": "Bellandur Bellandur Post Office, Bellandur Main Rd",
      "city": "Bangalore",
      "pCode": 560103
    },
    {
      "locality_1": "Bellandur Gate Bus Stop, Sarjapur Road",
      "area_1": "Bellandur",
      "area_2": "Bellandur Bellandur Gate Bus Stop, Sarjapur Road",
      "city": "Bangalore",
      "pCode": 560103
    },
    {
      "locality_1": "Bellandur Main Rd",
      "area_1": "Bellandur",
      "area_2": "Bellandur Bellandur Main Rd",
      "city": "Bangalore",
      "pCode": 560103
    },
    {
      "locality_1": "Kadabeesanahalli",
      "area_1": "Kadabeesanahalli",
      "area_2": "Kadabeesanahalli Kadabeesanahalli",
      "city": "Bangalore",
      "pCode": 560087
    },
    {
      "locality_1": "Sarjapur Road",
      "area_1": "Sarjapur Road",
      "area_2": "Sarjapur Road Sarjapur Road",
      "city": "Bangalore",
      "pCode": 560035
    },
    {
      "locality_1": "Valliyamma Layout",
      "area_1": "Sarjapur Road",
      "area_2": "Sarjapur Road Valliyamma Layout",
      "city": "Bangalore",
      "pCode": 560035
    },
    {
      "locality_1": "Kasavanahalli",
      "area_1": "Sarjapur Road",
      "area_2": "Sarjapur Road Kasavanahalli",
      "city": "Bangalore",
      "pCode": 560035
    },
    {
      "locality_1": "Doddakanneli",
      "area_1": "Sarjapur Road",
      "area_2": "Sarjapur Road Doddakanneli",
      "city": "Bangalore",
      "pCode": 560035
    },
    {
      "locality_1": "Muneshwara Nagar",
      "area_1": "Muneshwara Nagar",
      "area_2": "Muneshwara Nagar Muneshwara Nagar",
      "city": "Bangalore",
      "pCode": 560056
    },
    {
      "locality_1": "Rajiv Gandhi Nagar",
      "area_1": "Rajiv Gandhi Nagar",
      "area_2": "Rajiv Gandhi Nagar Rajiv Gandhi Nagar",
      "city": "Bangalore",
      "pCode": 560091
    },
    {
      "locality_1": "HAL Layout",
      "area_1": "HAL Layout",
      "area_2": "HAL Layout HAL Layout",
      "city": "Bangalore",
      "pCode": 560008
    },
    {
      "locality_1": "AECS Layout A Block",
      "area_1": "AECS Layout",
      "area_2": "AECS Layout AECS Layout A Block",
      "city": "Bangalore",
      "pCode": 560066
    },
    {
      "locality_1": "Parappana Agrahara",
      "area_1": "Parappana Agrahara",
      "area_2": "Parappana Agrahara Parappana Agrahara",
      "city": "Bangalore",
      "pCode": 560100
    }
  ]
};
     $(function () {        

        // addr_list = getAddrList();
        // buildSearchgAlgo();


         var lat = 0,
             lng = 0,
             latlng = new google.maps.LatLng(lat, lng),
             image = 'http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png';

         //zoomControl: true,
         //zoomControlOptions: google.maps.ZoomControlStyle.LARGE,

         var mapOptions = {
             center: new google.maps.LatLng(lat, lng),
             zoom: 13,
             mapTypeId: google.maps.MapTypeId.ROADMAP,
             panControl: true,
             panControlOptions: {
                 position: google.maps.ControlPosition.TOP_RIGHT
             },
             zoomControl: true,
             zoomControlOptions: {
                 style: google.maps.ZoomControlStyle.LARGE,
                 position: google.maps.ControlPosition.TOP_left
             }
         };

         var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

         var input = document.getElementById('search_loc');
         var autocomplete = new google.maps.places.Autocomplete(input, {
             types: ["geocode"]
         });

         autocomplete.bindTo('bounds', map);
         var infowindow = new google.maps.InfoWindow();

         google.maps.event.addListener(autocomplete, 'place_changed', function (event) {
             // infowindow.close();
             var place = autocomplete.getPlace();

             console.log("place.name");
             console.log(place);
             var search_name = place.formatted_address;
             var mylat = place.geometry.location.lat();
             var mylon = place.geometry.location.lng();
             getLocality(mylat,mylon,search_name);
         });


         $("#search_loc").focusin(function () {
             $(document).keypress(function (e) {
                 if (e.which == 13) {
                     return false;
                     infowindow.close();
                     var firstResult = $(".pac-container .pac-item:first").text();
                     var geocoder = new google.maps.Geocoder();
                     geocoder.geocode({
                         "address": firstResult
                     }, function (results, status) {
                         if (status == google.maps.GeocoderStatus.OK) {
                             var lat = results[0].geometry.location.lat(),
                                 lng = results[0].geometry.location.lng(),
                                 placeName = results[0].address_components[0].long_name,
                                 latlng = new google.maps.LatLng(lat, lng);

                             moveMarker(placeName, latlng);
                             $("input").val(firstResult);
                             console.log("firstResult");
                             console.log(firstResult);
                         }
                     });
                 }
             });
         });

         function moveMarker(placeName, latlng) {
             marker.setIcon(image);
             marker.setPosition(latlng);
             infowindow.setContent(placeName);
             //infowindow.open(map, marker);
         }

      
     });

function buildSearchgAlgo(data,key_list){
    var searchG_ele = [];

    $.each(data.results, function(i,val){
            // alert(JSON.stringify(val.address_components)));

            $.each(val.address_components, function(k, resultants){
                searchG_ele.push(resultants.long_name.toLowerCase());
            });
    });
  //  console.log(searchG_ele);
    //console.log(key_list);


    var getFlag = false;
    $.each(searchG_ele,function(ind,search_ele){
        // console.log("ele--"+JSON.stringify(search_ele));
        $.each(key_list.address,function(keyind,search_Key){
            // console.log("key--"+JSON.stringify(search_Key));
            if(search_Key.pCode == search_ele){
                console.log("ele--"+JSON.stringify(search_ele));
                console.log("key--"+JSON.stringify(search_Key));
                getFlag = true;
                return true;
            }
        });
    })
    console.log(getFlag);
    if(getFlag == true){
        $(".search-result").html('Oh!!! Yes we are available to serve you.');
    }else{
        $(".search-result").html('Sorry!!! We will be soon there');
    }
}

function getAddrList(){
    $.ajax({
        url:"jscript/address.json",
        type:"GET",
        contentType: "application/json",
        crossDomain: true,
        success:function(data){
            console.log(data);
            return data;
        },
        error:function(XHR, textStatus, errorThrown){

        }
    });
   
}



 function getLocality(mylat,mylon,search_name){
    $.ajax({
        url:"http://maps.google.com/maps/api/geocode/json?latlng="+mylat+","+mylon,
        type:"GET",
        success:function(data){
        	if(data.status == 'OK'){
                console.log('res');
                console.log(data);
                console.log(addr_list);
                buildSearchgAlgo(data,addr_list);
                // $("#demo1").html(JSON.stringify(data));
                if(search_name){
                  $("#search_loc").val(search_name);
                }else{
                  $("#search_loc").val(data.results[0].formatted_address);
                }
        	}else if(data.status == 'ZERO_RESULTS'){
        		$(".search-result").html('Sorry!! We did not recognize your details');
        	}
        },
        error:function(XHR, textStatus, errorThrown){

        }
    });
 }


        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            } else { 
                x.innerHTML = "Geolocation is not supported by this browser.";
            }
        }

        function showPosition(position) {
// var x = document.getElementById("demo");
        /*  var returnObj = {};
            returnObj.latitude = position.coords.latitude;
            returnObj.longitude = position.coords.longitude;

             x.innerHTML = "Latitude: " + position.coords.latitude + 
            "<br>Longitude: " + position.coords.longitude;   
            return returnObj;
        */    
            var mylat = position.coords.latitude;
            var mylon = position.coords.longitude;
            getLocality(mylat,mylon,null);

        }   
